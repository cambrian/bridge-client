"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
// Not an actual test, but good to make sure this works when updating types.
const WebSocket = require("ws");
const _src_1 = require("@src");
async function makeSocket() {
    return new Promise((resolve, _) => {
        const ws = new WebSocket('http://127.0.0.1:3000');
        ws.on('open', () => resolve(ws));
    });
}
async function run() {
    const ws = await makeSocket();
    const client = _src_1.BridgeClient.make(ws);
    const result = await _src_1.Call.DummyManager.addInts(client, { a: 3, b: 4 });
    console.log(result); // Output: 7
    try {
        const result = await _src_1.Call.DummyManager.addIntsBad(client, { a: 3, b: 4 });
        console.log(result);
    }
    catch (exception) {
        console.log(exception.message); // Output: request timed out (1)
    }
    const stream = await _src_1.Call.DummyManager.echoThrice(client, 1337);
    await _src_1.observe(console.log, stream); // Output: 1337 (x3)
    try {
        const stream = await _src_1.Call.DummyManager.echoThriceBad(client, 1337);
        await _src_1.observe(console.log, stream);
    }
    catch (exception) {
        console.log(exception.message); // Output: request timed out (1)
    }
    const fizzBuzz = { a: 'Fizz', b: 'Buzz' };
    const result2 = await _src_1.Call.DummyManager.concatTextAuth(client, 'Token', fizzBuzz);
    console.log(result2); // Output: { result: 'FizzBuzz' }
    const stream2 = await _src_1.Call.DummyManager.echoThriceAuth(client, 'Token', '1337');
    await _src_1.observe(console.log, stream2); // Output: '1337' (x3)
    ws.close();
}
run();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZXhhbXBsZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3Rlc3QvZXhhbXBsZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLDRFQUE0RTtBQUM1RSxnQ0FBK0I7QUFFL0IsK0JBQTBEO0FBRTFELEtBQUssVUFBVSxVQUFVO0lBQ3ZCLE9BQU8sSUFBSSxPQUFPLENBQVksQ0FBQyxPQUFPLEVBQUUsQ0FBQyxFQUFFLEVBQUU7UUFDM0MsTUFBTSxFQUFFLEdBQUcsSUFBSSxTQUFTLENBQUMsdUJBQXVCLENBQUMsQ0FBQTtRQUNqRCxFQUFFLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxHQUFHLEVBQUUsQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQTtJQUNsQyxDQUFDLENBQUMsQ0FBQTtBQUNKLENBQUM7QUFFRCxLQUFLLFVBQVUsR0FBRztJQUNoQixNQUFNLEVBQUUsR0FBRyxNQUFNLFVBQVUsRUFBRSxDQUFBO0lBQzdCLE1BQU0sTUFBTSxHQUFHLG1CQUFZLENBQUMsSUFBSSxDQUFzQixFQUFFLENBQUMsQ0FBQTtJQUV6RCxNQUFNLE1BQU0sR0FBRyxNQUFNLFdBQUksQ0FBQyxZQUFZLENBQUMsT0FBTyxDQUFDLE1BQU0sRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUE7SUFDdEUsT0FBTyxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsQ0FBQSxDQUFDLFlBQVk7SUFFaEMsSUFBSTtRQUNGLE1BQU0sTUFBTSxHQUFHLE1BQU0sV0FBSSxDQUFDLFlBQVksQ0FBQyxVQUFVLENBQUMsTUFBTSxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQTtRQUN6RSxPQUFPLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFBO0tBQ3BCO0lBQUMsT0FBTyxTQUFTLEVBQUU7UUFDbEIsT0FBTyxDQUFDLEdBQUcsQ0FBQyxTQUFTLENBQUMsT0FBTyxDQUFDLENBQUEsQ0FBQyxnQ0FBZ0M7S0FDaEU7SUFFRCxNQUFNLE1BQU0sR0FBRyxNQUFNLFdBQUksQ0FBQyxZQUFZLENBQUMsVUFBVSxDQUFDLE1BQU0sRUFBRSxJQUFJLENBQUMsQ0FBQTtJQUMvRCxNQUFNLGNBQU8sQ0FBQyxPQUFPLENBQUMsR0FBRyxFQUFFLE1BQU0sQ0FBQyxDQUFBLENBQUMsb0JBQW9CO0lBRXZELElBQUk7UUFDRixNQUFNLE1BQU0sR0FBRyxNQUFNLFdBQUksQ0FBQyxZQUFZLENBQUMsYUFBYSxDQUFDLE1BQU0sRUFBRSxJQUFJLENBQUMsQ0FBQTtRQUNsRSxNQUFNLGNBQU8sQ0FBQyxPQUFPLENBQUMsR0FBRyxFQUFFLE1BQU0sQ0FBQyxDQUFBO0tBQ25DO0lBQUMsT0FBTyxTQUFTLEVBQUU7UUFDbEIsT0FBTyxDQUFDLEdBQUcsQ0FBQyxTQUFTLENBQUMsT0FBTyxDQUFDLENBQUEsQ0FBQyxnQ0FBZ0M7S0FDaEU7SUFFRCxNQUFNLFFBQVEsR0FBRyxFQUFFLENBQUMsRUFBRSxNQUFNLEVBQUUsQ0FBQyxFQUFFLE1BQU0sRUFBRSxDQUFBO0lBQ3pDLE1BQU0sT0FBTyxHQUFHLE1BQU0sV0FBSSxDQUFDLFlBQVksQ0FBQyxjQUFjLENBQUMsTUFBTSxFQUFFLE9BQU8sRUFBRSxRQUFRLENBQUMsQ0FBQTtJQUNqRixPQUFPLENBQUMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxDQUFBLENBQUMsaUNBQWlDO0lBRXRELE1BQU0sT0FBTyxHQUFHLE1BQU0sV0FBSSxDQUFDLFlBQVksQ0FBQyxjQUFjLENBQUMsTUFBTSxFQUFFLE9BQU8sRUFBRSxNQUFNLENBQUMsQ0FBQTtJQUMvRSxNQUFNLGNBQU8sQ0FBQyxPQUFPLENBQUMsR0FBRyxFQUFFLE9BQU8sQ0FBQyxDQUFBLENBQUMsc0JBQXNCO0lBQzFELEVBQUUsQ0FBQyxLQUFLLEVBQUUsQ0FBQTtBQUNaLENBQUM7QUFFRCxHQUFHLEVBQUUsQ0FBQSJ9